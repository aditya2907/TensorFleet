# TensorFleet MongoDB ML Architecture Diagrams

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TensorFleet Platform                                â”‚
â”‚                     Distributed ML Training System                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â”‚  (Browser/  â”‚
â”‚    CLI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP/REST
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Application Layer                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   API    â”‚    â”‚  Front   â”‚    â”‚ Monitor  â”‚    â”‚  Model   â”‚            â”‚
â”‚  â”‚ Gateway  â”‚â—„â”€â”€â–ºâ”‚   end    â”‚â—„â”€â”€â–ºâ”‚  Service â”‚â—„â”€â”€â–ºâ”‚  Service â”‚            â”‚
â”‚  â”‚  :8080   â”‚    â”‚  :3000   â”‚    â”‚  :8082   â”‚    â”‚  :8083   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚ gRPC                                            â”‚ MongoDB           â”‚
â”‚       â–¼                                                 â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Orchest  â”‚    â”‚  Worker  â”‚    â”‚  Storage â”‚    â”‚ ML Workerâ”‚            â”‚
â”‚  â”‚  -rator  â”‚â—„â”€â”€â–ºâ”‚   (Go)   â”‚    â”‚  Service â”‚    â”‚ (Python) â”‚            â”‚
â”‚  â”‚  :50051  â”‚    â”‚  :50052  â”‚    â”‚  :8081   â”‚    â”‚  :8000   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚                                â”‚               â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                â”‚               â”‚
        â–¼                                â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Data Layer                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Redis   â”‚    â”‚  MinIO   â”‚    â”‚ MongoDB  â”‚    â”‚Prometheusâ”‚            â”‚
â”‚  â”‚ Metadata â”‚    â”‚ Storage  â”‚    â”‚ Datasets â”‚    â”‚ Metrics  â”‚            â”‚
â”‚  â”‚  :6379   â”‚    â”‚  :9000   â”‚    â”‚ & Models â”‚    â”‚  :9090   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  :27017  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                        â”‚                                    â”‚
â”‚                                   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                              â”‚
â”‚                                   â”‚ GridFS   â”‚                              â”‚
â”‚                                   â”‚ Models   â”‚                              â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¤– ML Training Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ML Model Training Workflow                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User/Client
        â”‚
        â”‚ 1. POST /train
        â”‚    {dataset, algorithm, hyperparameters}
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ML Worker  â”‚
   â”‚ API Server â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. Fetch Dataset
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  MongoDB   â”‚
   â”‚  Datasets  â”‚â—„â”€â”€â”€â”€â”€â”€â”€ Sample Datasets:
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         - iris (150 samples)
         â”‚                - wine (178 samples)
         â”‚ 3. Return Data
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ML Trainer â”‚
   â”‚  Service   â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 4. Preprocess Data
         â”‚    - Scale features
         â”‚    - Encode labels
         â”‚    - Train/test split
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Training  â”‚
   â”‚  Engine    â”‚â—„â”€â”€â”€â”€â”€â”€â”€ Algorithms:
   â”‚            â”‚         - RandomForest
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         - LogisticRegression
         â”‚                - SVM
         â”‚ 5. Train Model  - DecisionTree
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Trained   â”‚
   â”‚   Model    â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 6. Serialize (pickle)
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  GridFS    â”‚
   â”‚   Upload   â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 7. Save to MongoDB
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  MongoDB   â”‚
   â”‚  GridFS    â”‚         Metadata Stored:
   â”‚  Storage   â”‚         - model_id
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         - name, version
         â”‚                - algorithm
         â”‚                - hyperparameters
         â”‚ 8. Save Metadata - metrics (accuracy)
         â–¼                - features
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         - timestamp
   â”‚  MongoDB   â”‚
   â”‚   Models   â”‚
   â”‚ Collection â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 9. Return Response
         â–¼
    User/Client
        {
          model_id,
          metrics,
          version
        }
```

## ğŸ“¥ Model Download Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Model Download Workflow                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User/Client
        â”‚
        â”‚ 1. GET /api/v1/models
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Model    â”‚
   â”‚  Service   â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. Query MongoDB
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  MongoDB   â”‚
   â”‚   Models   â”‚
   â”‚ Collection â”‚â”€â”€â”€â”€â”€â”€â–º Returns:
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        - List of models
         â”‚               - Metadata
         â”‚ 3. Return List - Pagination
         â–¼
    User/Client
        â”‚
        â”‚ 4. GET /api/v1/models/{id}/download
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Model    â”‚
   â”‚  Service   â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 5. Get file_id from metadata
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  MongoDB   â”‚
   â”‚   Models   â”‚
   â”‚ Collection â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 6. Fetch from GridFS
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  GridFS    â”‚
   â”‚    Get     â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 7. Stream file chunks
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Binary   â”‚
   â”‚   Model    â”‚
   â”‚   Data     â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 8. Send to client
         â–¼
    User/Client
        â”‚
        â”‚ 9. Save as .pkl file
        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Local    â”‚
   â”‚   File     â”‚
   â”‚  model.pkl â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Data Flow Architecture                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Training Data Flow:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Datasets â”‚ â”€â”€â”
    â”‚ (CSV)    â”‚   â”‚ Initial Load
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ MongoDB â”‚
              â”‚ GridFS  â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Fetch
                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ML Workerâ”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Train
                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Model  â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Serialize
                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ MongoDB â”‚
              â”‚ GridFS  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Model Metadata Flow:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    Training Job
         â”‚
         â”‚ Extract
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Metadata   â”‚
    â”‚  - name     â”‚
    â”‚  - version  â”‚
    â”‚  - metrics  â”‚
    â”‚  - params   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Store
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  MongoDB    â”‚
    â”‚  Collection â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Query
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Model Serviceâ”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ API Response
           â–¼
        Client

Metrics Flow:
â•â•â•â•â•â•â•â•â•â•â•â•â•

    ML Worker / Model Service
         â”‚
         â”‚ Export
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Prometheus  â”‚
    â”‚  Metrics    â”‚
    â”‚  Endpoint   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Scrape
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Prometheus  â”‚
    â”‚   Server    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Query
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Grafana   â”‚
    â”‚ Dashboard   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ MongoDB Storage Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MongoDB Storage Organization                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

tensorfleet (Database)
â”‚
â”œâ”€â”€ datasets (Collection)
â”‚   â”œâ”€â”€ Document 1
â”‚   â”‚   â”œâ”€â”€ _id: ObjectId
â”‚   â”‚   â”œâ”€â”€ name: "iris"
â”‚   â”‚   â”œâ”€â”€ description: "Iris flower dataset"
â”‚   â”‚   â”œâ”€â”€ n_samples: 150
â”‚   â”‚   â”œâ”€â”€ n_features: 4
â”‚   â”‚   â”œâ”€â”€ features: ["sepal_length", ...]
â”‚   â”‚   â”œâ”€â”€ target_column: "species"
â”‚   â”‚   â”œâ”€â”€ file_id: ObjectId (GridFS)
â”‚   â”‚   â””â”€â”€ created_at: ISODate
â”‚   â”‚
â”‚   â””â”€â”€ Document 2
â”‚       â”œâ”€â”€ _id: ObjectId
â”‚       â”œâ”€â”€ name: "wine"
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ models (Collection)
â”‚   â”œâ”€â”€ Document 1
â”‚   â”‚   â”œâ”€â”€ _id: ObjectId
â”‚   â”‚   â”œâ”€â”€ file_id: ObjectId (GridFS)
â”‚   â”‚   â”œâ”€â”€ job_id: "rf_iris_001"
â”‚   â”‚   â”œâ”€â”€ name: "iris_rf_model"
â”‚   â”‚   â”œâ”€â”€ algorithm: "random_forest"
â”‚   â”‚   â”œâ”€â”€ hyperparameters: {...}
â”‚   â”‚   â”œâ”€â”€ metrics: {
â”‚   â”‚   â”‚   â”œâ”€â”€ train_accuracy: 0.98
â”‚   â”‚   â”‚   â”œâ”€â”€ test_accuracy: 0.96
â”‚   â”‚   â”‚   â””â”€â”€ training_time: 0.234
â”‚   â”‚   â”‚   }
â”‚   â”‚   â”œâ”€â”€ version: "v1701964800"
â”‚   â”‚   â”œâ”€â”€ dataset_name: "iris"
â”‚   â”‚   â”œâ”€â”€ features: [...]
â”‚   â”‚   â”œâ”€â”€ target_column: "species"
â”‚   â”‚   â”œâ”€â”€ model_type: "sklearn"
â”‚   â”‚   â”œâ”€â”€ status: "trained"
â”‚   â”‚   â””â”€â”€ created_at: ISODate
â”‚   â”‚
â”‚   â””â”€â”€ Document 2, 3, 4...
â”‚
â””â”€â”€ GridFS (fs.files & fs.chunks)
    â”œâ”€â”€ fs.files
    â”‚   â”œâ”€â”€ Document 1
    â”‚   â”‚   â”œâ”€â”€ _id: ObjectId
    â”‚   â”‚   â”œâ”€â”€ filename: "model_job_001_v1701964800.pkl"
    â”‚   â”‚   â”œâ”€â”€ length: 45678 (bytes)
    â”‚   â”‚   â”œâ”€â”€ chunkSize: 261120
    â”‚   â”‚   â”œâ”€â”€ uploadDate: ISODate
    â”‚   â”‚   â”œâ”€â”€ contentType: "application/octet-stream"
    â”‚   â”‚   â””â”€â”€ metadata: {...}
    â”‚   â”‚
    â”‚   â””â”€â”€ Document 2, 3...
    â”‚
    â””â”€â”€ fs.chunks
        â”œâ”€â”€ Chunk 1 (for file 1)
        â”‚   â”œâ”€â”€ _id: ObjectId
        â”‚   â”œâ”€â”€ files_id: ObjectId (reference)
        â”‚   â”œâ”€â”€ n: 0 (chunk number)
        â”‚   â””â”€â”€ data: BinData
        â”‚
        â”œâ”€â”€ Chunk 2 (for file 1)
        â””â”€â”€ ...
```

## ğŸ”Œ Service Integration Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service Communication Patterns                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HTTP/REST APIs:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Client â†â”€HTTPâ”€â†’ API Gateway â†â”€gRPCâ”€â†’ Orchestrator
Client â†â”€HTTPâ”€â†’ Frontend
Client â†â”€HTTPâ”€â†’ Model Service â†â”€MongoDBâ”€â†’ Database
Client â†â”€HTTPâ”€â†’ ML Worker â†â”€MongoDBâ”€â†’ Database
Client â†â”€HTTPâ”€â†’ Storage â†â”€MinIOâ”€â†’ Object Store
Client â†â”€HTTPâ”€â†’ Monitoring

Database Connections:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Orchestrator â†â”€Redisâ”€â†’ Redis Server
ML Worker â†â”€MongoDBâ”€â†’ MongoDB Server
Model Service â†â”€MongoDBâ”€â†’ MongoDB Server
Storage â†â”€MinIOâ”€â†’ MinIO Server

Metrics Collection:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ML Worker â”€â”
Model Service â”€â”¤
Orchestrator â”€â”¼â”€â†’ Prometheus â”€â†’ Grafana
Worker â”€â”¤
Monitoring â”€â”˜

gRPC Communication:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

API Gateway â†â”€gRPCâ”€â†’ Orchestrator â†â”€gRPCâ”€â†’ Worker
```

---

**These diagrams provide a complete visual understanding of the TensorFleet MongoDB ML architecture!** ğŸ¨
